(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{108:function(e,t,a){},112:function(e,t,a){},128:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),s=a.n(l),o=(a(90),a(18)),c=a(9),i=a(13),u=a(19),m=a.n(u),d=(a(108),a(46)),h=a(45),p=a(81),g=a(29);var f=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){m.a.get("/login",{withCredentials:!0}).then((function(e){console.log("loginGET:"+e.status),console.log(e),200===e.status?l(!0):205===e.status&&l(!1)})).catch((function(e){console.log("loginGET:"+e.response.status),console.log(e.response)}))}),[]),console.log(a),r.a.createElement(d.a,{bg:"light",expand:"lg"},r.a.createElement(d.a.Brand,{href:"/ihomie"},"iHomie"),r.a.createElement(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(d.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(h.a,{className:"mr-auto"},r.a.createElement(h.a.Link,{href:"/ihomie"},"Home"),r.a.createElement(h.a.Link,{href:"/ihomie#/upload"},"Upload"),r.a.createElement(h.a.Link,{href:"/ihomie#/register"},"Register")),r.a.createElement(p.a,{inline:!0},0==a?r.a.createElement(g.a,{variant:"outline-primary",onClick:function(e){window.location="/ihomie#/login"}},"Login"):r.a.createElement(g.a,{variant:"primary",onClick:function(e){m.a.get("/logout",{withCredentials:!0}).then((function(e){console.log("logoutGET:"+e.status),console.log(e),200===e.status&&l(!1)})).catch((function(e){console.log("logoutGET:"+e.response.status),console.log(e.response)}))}},"Logout"))))},E=a(133),b=a(132);a(112);var v=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1];Object(n.useEffect)((function(){m.a.get("/housings").then((function(e){console.log(e.data),console.log("housingsGET:"+e.status),l(e.data)}))}),[]);var s=a.map((function(e,t){return r.a.createElement(E.a,{lg:6,md:8,xs:24},r.a.createElement("img",{style:{width:"50%"},src:"https://bootstrapmade.com/demo/themes/EstateAgency/assets/img/slide-2.jpg",alt:"houseImage"}),r.a.createElement("p",null,e.name),r.a.createElement("p",null,e.address),r.a.createElement(o.b,{to:{pathname:"/detail",state:{objectId:e._id.$oid}}},"Go to see detail"))}));return r.a.createElement("div",{style:{width:"75%",margin:"3rem auto"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("h2",null,"  Find Your Future Home in iHomie ")),r.a.createElement("div",null,r.a.createElement(b.a,{gutter:[16,16]},s)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(o.b,{className:"link",to:"/upload"},"Upload New House")))},y=a(76),w=a(31),C=a.n(w),S=a(54),j=a(77),k=a(78),O=a(83),x=a(82),T=a(79),I=a(80),B=a(39),N=a(33),P=a(41),A=a(32),F=a(44),H=a(59),L=function(e){Object(O.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={name:"",address:"",prevState:null,needLogin:!1,show:!1,showSuccessBar:!1,showFailureBar:!1,errorCode:0,goHomePage:!1},n}return Object(k.a)(a,[{key:"componentDidMount",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/housings/".concat(this.props.objectId)).then((function(e){return e.json()}));case 2:t=e.sent,this.setState(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleInputChange",value:function(e){this.setState(Object(y.a)({},e.target.name,e.target.value))}},{key:"handleModify",value:function(e){this.setState({prevState:this.state,show:!0})}},{key:"handleSave",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var a=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/housings/".concat(this.props.objectId),{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(this.state)}).then((function(e){405==e.status?a.setState({needLogin:!0}):200==e.status?a.setState({show:!1,showSuccessBar:!0}):(a.state.prevState.showFailureBar=!0,a.state.prevState.errorCode=e.status,a.setState(a.state.prevState))}));case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var a=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/housings/".concat(this.props.objectId),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){405==e.status?a.setState({needLogin:!0}):200==e.status?a.setState({goHomePage:!0}):a.setState({show:!1,showFailureBar:!0,errorCode:e.status})}));case 2:e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCancel",value:function(e){this.state.prevState.show=!1,this.setState(this.state.prevState)}},{key:"handleClose",value:function(e){this.setState({show:!1})}},{key:"handleCloseSuccessBar",value:function(e){this.setState({showSuccessBar:!1})}},{key:"handleCloseFailureBar",value:function(e){this.setState({showFailureBar:!1})}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.address,n=e.needLogin,l=e.show,s=e.showSuccessBar,o=e.showFailureBar,i=e.errorCode,u=e.goHomePage;return n?r.a.createElement(c.a,{to:"/login"}):u?r.a.createElement(c.a,{to:"/"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{show:s,variant:"success",onClose:this.handleCloseSuccessBar.bind(this),dismissible:!0},"Modified information successfully!"),r.a.createElement(H.a,{show:o,variant:"danger",onClose:this.handleCloseFailureBar.bind(this),dismissible:!0},"Failed to modify information, error response code: ",i),r.a.createElement(P.a,{show:l,onHide:this.handleClose.bind(this)},r.a.createElement(P.a.Header,{closeButton:!0},r.a.createElement(P.a.Title,null,"Modify house information")),r.a.createElement(P.a.Body,null,r.a.createElement(A.a,{className:"mb-3"},r.a.createElement(A.a.Prepend,null,r.a.createElement(A.a.Text,{id:"basic-addon3"},"Name")),r.a.createElement(F.a,{name:"name","aria-describedby":"basic-addon3",value:t,onChange:this.handleInputChange.bind(this)})),r.a.createElement(A.a,{className:"mb-3"},r.a.createElement(A.a.Prepend,null,r.a.createElement(A.a.Text,{id:"basic-addon3"},"Address")),r.a.createElement(F.a,{name:"address","aria-describedby":"basic-addon3",value:a,onChange:this.handleInputChange.bind(this)}))),r.a.createElement(P.a.Footer,null,r.a.createElement(g.a,{variant:"primary",onClick:this.handleSave.bind(this)},"Save Changes"),r.a.createElement(g.a,{variant:"secondary",onClick:this.handleCancel.bind(this)},"Cancel"))),r.a.createElement(T.a,null,r.a.createElement(I.a,null,r.a.createElement(B.a,null),r.a.createElement(B.a,null,r.a.createElement(N.a,{style:{width:"50em",margin:"1em"}},r.a.createElement(N.a.Img,{variant:"top",src:"https://bootstrapmade.com/demo/themes/EstateAgency/assets/img/slide-2.jpg"}),r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Title,null,t),r.a.createElement(N.a.Subtitle,{className:"mb-2 text-muted"},a),r.a.createElement(N.a.Text,null,"A property description is the written portion of a real estate listing that describes the real estate for sale or lease. Nowadays, most buyers begin their property search online. Therefore, real estate descriptions are your best chance to sway buyers and sellers."),r.a.createElement(g.a,{variant:"primary",onClick:this.handleModify.bind(this)},"Modify"),r.a.createElement(g.a,{variant:"primary",onClick:this.handleDelete.bind(this),style:{margin:"1px"}},"Delete")))),r.a.createElement(B.a,null))))}}]),a}(r.a.Component);var D=Object(c.g)((function(e){return r.a.createElement(L,{objectId:e.location.state.objectId})}));var M=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)(""),o=Object(i.a)(s,2),c=o[0],u=o[1];return r.a.createElement("div",null,r.a.createElement("div",{style:{width:"75%",margin:"3rem auto"}},r.a.createElement("form",null,r.a.createElement("div",{class:"form-group"},r.a.createElement("label",null,"House Name"),r.a.createElement("input",{type:"text",onChange:function(e){l(e.currentTarget.value)},class:"form-control",id:"email-input",placeholder:"Input your email address here"})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",null,"Address"),r.a.createElement("input",{type:"text",onChange:function(e){u(e.currentTarget.value)},class:"form-control",id:"password-input",placeholder:"Input your password here"})),r.a.createElement("button",{type:"submit",class:"btn btn-primary",onClick:function(e){if(e.preventDefault(),!a||!c)return alert("Please fill in all fields!");console.log(a),console.log(c);var t={name:a,address:c};m.a.post("/housings",t,{withCredentials:!0}).then((function(e){console.log(e.status),console.log(e),200===e.status?alert("Upload successfully!"):alert("You meet with an error!")})).catch((function(e){console.log(e.response),400===e.response.status&&alert("Parameter wrong!")}))}},"Submit"))))};var G=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)(""),c=Object(i.a)(s,2),u=c[0],d=c[1];return r.a.createElement("div",{style:{width:"75%",margin:"3rem auto"}},r.a.createElement("form",null,r.a.createElement("div",{class:"form-group"},r.a.createElement("label",null,"Email address"),r.a.createElement("input",{type:"email",onChange:function(e){l(e.currentTarget.value)},class:"form-control",id:"email-input",placeholder:"Input your email address here"})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",onChange:function(e){d(e.currentTarget.value)},class:"form-control",id:"password-input",placeholder:"Input your password here"})),r.a.createElement("button",{type:"submit",class:"btn btn-primary",onClick:function(e){if(e.preventDefault(),!a||!u)return alert("Please fill in all fields!");console.log(a),console.log(u);var t={email:a,password:u};console.log(t),m.a.post("/login",t,{withCredentials:!0}).then((function(e){console.log(e.status),console.log(e),200===e.status?(alert("Login successfully!"),window.location.replace("/ihomie")):alert("You meet with an error!")})).catch((function(e){console.log(e.response),401===e.status?alert("You need to register for the account!"):400===e.status?alert("Wrong Password!"):402===e.status&&alert("Wrong Parameters!")}))}},"Submit")),r.a.createElement("small",{class:"text-muted"},"Need An Account? ",r.a.createElement(o.b,{className:"link",to:"/register"},"Sign Up Now")))};var U=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],l=t[1],s=Object(n.useState)(""),c=Object(i.a)(s,2),u=c[0],d=c[1],h=Object(n.useState)(""),p=Object(i.a)(h,2),g=p[0],f=p[1];return r.a.createElement("div",{style:{width:"75%",margin:"3rem auto"}},r.a.createElement("form",null,r.a.createElement("div",{class:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",onChange:function(e){l(e.currentTarget.value)},class:"form-control",id:"email-input",placeholder:"Input username here"})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",null,"Email address"),r.a.createElement("input",{type:"email",onChange:function(e){d(e.currentTarget.value)},class:"form-control",id:"email-input",placeholder:"Input your email address here"})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",onChange:function(e){f(e.currentTarget.value)},class:"form-control",id:"password-input",placeholder:"Input your password here"})),r.a.createElement("button",{type:"submit",class:"btn btn-primary",onClick:function(e){if(e.preventDefault(),!a||!u||!g)return alert("Please fill in all fields!");console.log(a),console.log(u),console.log(g);var t={username:a,email:u,password:g};console.log(t),m.a.post("/register",t).then((function(e){console.log(e.status),console.log(e),200===e.status?alert("Register successfully!"):alert("You meet with an error!")})).catch((function(e){console.log(e.response),401===e.response.status?alert("The email has been registered!"):402===e.response.status?alert("This username is unavailable!"):400===e.response.status?alert("You have loged in already!"):403===e.response.status&&alert("Parameter wrong!")}))}},"Submit")),r.a.createElement("small",{class:"text-muted"},"Already Have An Account? ",r.a.createElement(o.b,{className:"link",to:"/login"},"Sign In")))};var Y=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,null,r.a.createElement(f,null),r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",component:v}),r.a.createElement(c.b,{exact:!0,path:"/detail",component:D}),r.a.createElement(c.b,{exact:!0,path:"/upload",component:M}),r.a.createElement(c.b,{exact:!0,path:"/login",component:G}),r.a.createElement(c.b,{exact:!0,path:"/register",component:U}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(127);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,t,a){e.exports=a(128)},90:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.cff06260.chunk.js.map